importPackage(java.lang);
importPackage(Packages.server);

var MaleItemList = [1000423, 1000301, 1000303, 1000309, 1000312, 1000316, 1000320, 1000560, 1000651, 1000655, 1000324, 1000328, 1000678, 1000683, 1000335, 1000339, 1000647, 1000650, 1000342, 1000345, 1000349, 1000354, 1000357, 1000359, 1000504, 1000507, 1000625, 1000669, 1000672, 1000676, 1000430, 1000434, 1000438, 1000441, 1000516, 1000574, 1000444, 1000446, 1000457, 1000501, 1000460, 1000463, 1000554, 1000600, 1000636, 1000470, 1000579, 1000659, 1000663, 1000593, 1000608, 1000695, 1000607, 1000686, 1000690, 1000480, 1000714, 1000718, 1000502, 1000497, 1000510, 1000513, 1000535, 1000603, 1000578, 1000570, 1000589, 1000595, 1000601, 1000609, 1000615, 1000719, 1000723, 1000622, 1000702, 1000626, 1000639, 1000643, 1000708, 1000725, 1000465, 1000526, 1000539, 1000545, 1000594, 1008002, 1008010, 1008014, 1008018, 1008022, 1008026, 1008030, 1008034, 1008038, 1008042, 1008046, 1008050, 1008054, 1008058, 1008062, 1008066, 1008070, 1008074, 1008078, 1008082, 1008086, 1008090, 1008094, 1008098, 1008102, 1008106, 1008110, 1008114, 1008118, 1008122, 1008126, 1008147, 1008151, 1008155, 1008159, 1008163, 1008167, 1008171, 1008142, 1008146, 1008178, 1008182, 1008186, 1008209, 1008213, 1008217, 1008221, 1008225, 1008229, 1008233, 1008237, 1008241, 1008245, 1008249, 1008253, 1008257, 1008169, 1008173, 1008260, 1008264, 1008268, 1008272, 1050803, 1050925, 1050914, 1050920, 1050862, 1050991, 1050994, 1058035, 1058039, 1050827, 1050937, 1050830, 1050833, 1050904, 1050927, 1050932, 1050844, 1050858, 1050863, 1050867, 1058044, 1058049, 1058024, 1050866, 1058052, 1058055, 1050869, 1050943, 1050847, 1050876, 1058058, 1050959, 1050964, 1050913, 1058008, 1058010, 1050890, 1058030, 1050892, 1050989, 1050901, 1050907, 1050923, 1050944, 1050949, 1050953, 1050957, 1050969, 1050973, 1050976, 1050979, 1050981, 1050985, 1058003, 1058005, 1058017, 1058020, 1058060, 1058065, 1058069, 1058073, 1050802, 1050848, 1050895, 1058083, 1058094, 1058098, 1058102, 1058106, 1058110, 1058114, 1058118, 1058122, 1058126, 1058130, 1058134, 1058138, 1058142, 1058146, 1056196, 1058155, 1058159, 1058163, 1058173, 1058177, 1058181, 1058185, 1058189, 1058193, 1058206, 1058210, 1058214, 1058224, 1058228, 1058232, 1058236, 1058150, 1057001, 1057005, 1057009, 1057013, 1057017, 1057021, 1057025, 1057029, 1057033, 1057037, 1058241, 1045002, 1045006, 1045010, 1045014, 1065002, 1704506, 1704510, 1704521, 1704541, 1704511, 1704515, 1704523, 1704527, 1704531, 1704535, 1704536, 1704540, 1102115, 1102119, 1102123, 1102135, 1102128, 1102132, 1073303, 1073317, 1073318, 1075000, 1075001, 1075002, 1075003, 1012378, 1012900, 1012901, 1012902, 1012380, 1012381, 1012903, 1012904, 1012905, 1012906, 1012907, 1084002, 1084011, 1084015];

var FemaleItemList = [1001423, 1001301, 1001303, 1001309, 1001312, 1001316, 1001320, 1001560, 1001651, 1001655, 1001324, 1001328, 1001678, 1001683, 1001335, 1001339, 1001647, 1001650, 1001342, 1001345, 1001349, 1001354, 1001357, 1001359, 1001504, 1001507, 1001625, 1001669, 1001672, 1001676, 1001430, 1001434, 1001438, 1001441, 1001516, 1001574, 1001444, 1001446, 1001457, 1001501, 1001460, 1001463, 1001554, 1001600, 1001636, 1001470, 1001579, 1001659, 1001663, 1001593, 1001608, 1001695, 1001607, 1001686, 1001690, 1001480, 1001714, 1001718, 1001502, 1001497, 1001510, 1001513, 1001535, 1001603, 1001578, 1001570, 1001589, 1001595, 1001601, 1001609, 1001615, 1001719, 1001723, 1001622, 1001702, 1001626, 1001639, 1001643, 1001708, 1001725, 1001465, 1001526, 1001539, 1001545, 1001594, 1008002, 1008010, 1008014, 1008018, 1008022, 1008026, 1008030, 1008034, 1008038, 1008042, 1008046, 1008050, 1008054, 1008058, 1008062, 1008066, 1008070, 1008074, 1008078, 1008082, 1008086, 1008090, 1008094, 1008098, 1008102, 1008106, 1008110, 1008114, 1008118, 1008122, 1008126, 1008147, 1008151, 1008155, 1008159, 1008163, 1008167, 1008171, 1008142, 1008146, 1008178, 1008182, 1008186, 1008209, 1008213, 1008217, 1008221, 1008225, 1008229, 1008233, 1008237, 1008241, 1008245, 1008249, 1008253, 1008257, 1008169, 1008173, 1008260, 1008264, 1008268, 1008272, 1051825, 1051947, 1052717, 1052719, 1051942, 1051817, 1051869, 1052729, 1056025, 1056029, 1051803, 1051805, 1056116, 1051808, 1051814, 1051958, 1051963, 1056069, 1056071, 1051819, 1051876, 1056087, 1056091, 1056111, 1051824, 1051828, 1051965, 1051971, 1056030, 1051850, 1056105, 1056108, 1056101, 1051976, 1051867, 1051873, 1051988, 1051992, 1051863, 1056079, 1056082, 1051866, 1056060, 1051882, 1051885, 1051890, 1051993, 1051999, 1051896, 1051899, 1056041, 1056046, 1056062, 1056067, 1051912, 1051917, 1051920, 1051927, 1051932, 1051943, 1051938, 1051950, 1051954, 1051980, 1051981, 1056002, 1056005, 1056010, 1056014, 1056017, 1056021, 1056034, 1056038, 1056049, 1056054, 1056097, 1056098, 1056123, 1051837, 1051897, 1051924, 1056112, 1056130, 1056141, 1056145, 1056149, 1056153, 1056157, 1056161, 1056165, 1056169, 1056173, 1056177, 1056181, 1056185, 1056189, 1056193, 1056197, 1056201, 1056208, 1056212, 1056216, 1056220, 1056224, 1056228, 1056238, 1056242, 1056246, 1056250, 1056254, 1056267, 1056271, 1056275, 1056279, 1056289, 1056293, 1056297, 1058150, 1057001, 1057005, 1057009, 1057013, 1057017, 1057021, 1057025, 1057029, 1057033, 1057037, 1056304, 1045002, 1045006, 1045010, 1045014, 1065002, 1704506, 1704510, 1704521, 1704541, 1704511, 1704515, 1704523, 1704527, 1704531, 1704535, 1704536, 1704540, 1102115, 1102119, 1102123, 1102135, 1102128, 1102132, 1073303, 1073317, 1073318, 1075000, 1075001, 1075002, 1075003, 1012378, 1012900, 1012901, 1012902, 1012380, 1012381, 1012903, 1012904, 1012905, 1012906, 1012907, 1084002, 1084011, 1084015];

var enter = "\r\n";

var need = 2438700, item;

var selected, seld = -1;
var finallist;

function start() {
	status = -1;
	action(1, 0, 0);
}

function action(mode, type, sel) {
	if (mode == 1) {
		status++;
	} else {
		cm.dispose();
		return;
    	}
	if (status == 0) {
		var msg = "#e#rDEEZ 스페셜 캐시박스 C#n#k"+enter;
		msg += "#r#i"+need +"##z"+need +"##k를 가지고 있다면 제가 DEEZ 스페셜 캐시박스 C 에서 1종을 랜덤으로 바꿔줄게요. 운이 좋다면 #r어메이징하게 예쁜#k 스페셜 캐시 의상 아이템도 받을 수가 있죠! 어때요? 지금 바로 쿠폰을 사용하시겠어요?#b"+enter;
		msg += "#L1#아이템 리스트보기 (남)"+enter;
		msg += "#L2#아이템 리스트보기 (여)"+enter+enter;
		msg += "#L3#아이템 사용 (랜덤)";
		cm.sendSimple(msg);
	} else if (status == 1) {
		seld = sel;
		if (sel == 1 || sel == 2) {
			var msg = "DEEZ 스페셜 캐시박스 C에선 다음과 같은 아이템들이 등장합니다!#b"+enter;
			finallist = sel == 1 ? MaleItemList : FemaleItemList;
			for (i = 0; i < finallist.length; i++) {
				msg += "#i"+finallist[i]+"##z"+finallist[i]+"#";
				if (i % 5 == 4)
					msg += enter;
			}
			cm.sendOk(msg);
			cm.dispose();
		} else {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}
			var msg = "어떤 성별의 의상을 보시겠어요?#fs11##b"+enter;
			msg += "#L1#남성"+enter;
			msg += "#L2#여성"+enter;

			cm.sendSimple(msg);
		}
	} else if (status == 2) {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}
			finallist = sel == 1 ? MaleItemList : FemaleItemList;
			cm.sendYesNo("정말 #b#i"+need+"##z"+need+"##k 아이템을 사용하겠어요?");
	} else if (status == 3) {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}

			item = finallist[Packages.server.Randomizer.rand(0, finallist.length)];

			check = Packages.server.MapleItemInformationProvider.getInstance().itemExists(item);

			while (!check) {
				item = finallist[Packages.server.Randomizer.rand(0, finallist.length)];
			}

			if (!cm.canHold(item)) {
				cm.sendOk("장비창에 공간이 부족합니다.");
				cm.dispose();
				return;
			}
			cm.gainItem(item, 1);
			cm.gainItem(need, -1);
			var msg = "어때요? #r#i"+item+"##z"+item+"##k아이템은 잘 받았어요? 정말 어메이징하지 않아요? 다음번에 또 #bDEEZ 스페셜 캐시박스 C#k가 생기면 나를 찾아와줘요!";
			cm.sendOk(msg);
			cm.dispose();
	}
}