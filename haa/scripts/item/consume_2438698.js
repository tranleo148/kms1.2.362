importPackage(java.lang);
importPackage(Packages.server);

var MaleItemList = [1000299, 1000298, 1000422, 1000305, 1000306, 1000308, 1000314, 1000318, 1000557, 1000559, 1000562, 1000654, 1000330, 1000680, 1000681, 1000333, 1000337, 1000648, 1000340, 1000341, 1000346, 1000530, 1000569, 1000361, 1000363, 1000365, 1000506, 1000624, 1000670, 1000675, 1000428, 1000432, 1000439, 1000475, 1000575, 1000632, 1000599, 1000451, 1000455, 1000458, 1000485, 1000556, 1000635, 1000472, 1000473, 1000582, 1000661, 1000667, 1000566, 1000476, 1000693, 1000697, 1000687, 1000691, 1000478, 1000712, 1000716, 1000483, 1000496, 1000498, 1000508, 1000514, 1000520, 1000604, 1000549, 1000565, 1000571, 1000587, 1000598, 1000605, 1000613, 1000617, 1000721, 1000700, 1000705, 1000629, 1000640, 1000642, 1000645, 1000706, 1000710, 1000726, 1000490, 1000488, 1000546, 1008000, 1008004, 1008012, 1008016, 1008020, 1008024, 1008028, 1008032, 1008036, 1008040, 1008044, 1008048, 1008052, 1008056, 1008060, 1008064, 1008068, 1008072, 1008076, 1008080, 1008084, 1008088, 1008092, 1008096, 1008100, 1008104, 1008108, 1008112, 1008116, 1008120, 1008124, 1008128, 1008149, 1008153, 1008144, 1008176, 1008180, 1008184, 1008188, 1008211, 1008215, 1008219, 1008223, 1008227, 1008231, 1008235, 1008239, 1008243, 1008247, 1008251, 1008255, 1008166, 1008170, 1008174, 1008261, 1008265, 1008269, 1008273, 1052715, 1050924, 1052720, 1050919, 1050860, 1050989, 1050993, 1050894, 1058034, 1058038, 1050826, 1050935, 1050940, 1050996, 1050834, 1050835, 1050837, 1050930, 1050843, 1050857, 1050854, 1058043, 1058046, 1058050, 1058022, 1058027, 1058053, 1058057, 1050870, 1050871, 1050877, 1050918, 1050883, 1050963, 1050884, 1050888, 1058012, 1058028, 1058032, 1050896, 1050899, 1050908, 1050922, 1050945, 1050948, 1050954, 1050955, 1050967, 1050970, 1050977, 1050978, 1050983, 1050987, 1050999, 1058004, 1058015, 1058019, 1058059, 1058063, 1058067, 1058071, 1058075, 1050832, 1050882, 1050906, 1058077, 1058085, 1058096, 1058100, 1058104, 1058108, 1058112, 1058116, 1058120, 1058124, 1058128, 1058132, 1058136, 1058140, 1058144, 1056194, 1056198, 1058153, 1058157, 1058161, 1058165, 1058183, 1058187, 1058191, 1058204, 1058208, 1058212, 1058216, 1058226, 1058230, 1058234, 1058148, 1058152, 1057003, 1057007, 1057011, 1057015, 1057019, 1057023, 1057027, 1057031, 1057035, 1057039, 1058238, 1058242, 1045000, 1045004, 1045008, 1045012, 1065000, 1704500, 1704508, 1704519, 1704502, 1704543, 1704513, 1704517, 1704525, 1704529, 1704533, 1704544, 1704538, 1102113, 1102117, 1102121, 1102125, 1102126, 1102130, 1073303, 1073317, 1073318, 1075000, 1075001, 1075002, 1075003, 1012378, 1012900, 1012901, 1012902, 1012380, 1012381, 1012903, 1012904, 1012905, 1012906, 1012907, 1084000, 1084004, 1084013, 1084017];

var FemaleItemList = [1001299, 1001298, 1001422, 1001305, 1001306, 1001308, 1001314, 1001318, 1001557, 1001559, 1001562, 1001654, 1001330, 1001680, 1001681, 1001333, 1001337, 1001648, 1001340, 1001341, 1001346, 1001530, 1001569, 1001361, 1001363, 1001365, 1001506, 1001624, 1001670, 1001675, 1001428, 1001432, 1001439, 1001475, 1001575, 1001632, 1001599, 1001451, 1001455, 1001458, 1001485, 1001556, 1001635, 1001472, 1001473, 1001582, 1001661, 1001667, 1001566, 1001476, 1001693, 1001697, 1001687, 1001691, 1001478, 1001712, 1001716, 1001483, 1001496, 1001498, 1001508, 1001514, 1001520, 1001604, 1001549, 1001565, 1001571, 1001587, 1001598, 1001605, 1001613, 1001617, 1001721, 1001700, 1001705, 1001629, 1001640, 1001642, 1001645, 1001706, 1001710, 1001726, 1001453, 1001488, 1001546, 1008000, 1008004, 1008012, 1008016, 1008020, 1008024, 1008028, 1008032, 1008036, 1008040, 1008044, 1008048, 1008052, 1008056, 1008060, 1008064, 1008068, 1008072, 1008076, 1008080, 1008084, 1008088, 1008092, 1008096, 1008100, 1008104, 1008108, 1008112, 1008116, 1008120, 1008124, 1008128, 1008149, 1008153, 1008144, 1008176, 1008180, 1008184, 1008188, 1008211, 1008215, 1008219, 1008223, 1008227, 1008231, 1008235, 1008239, 1008243, 1008247, 1008251, 1008255, 1008166, 1008170, 1008174, 1008261, 1008265, 1008269, 1008273, 1052713, 1051946, 1052718, 1051834, 1051941, 1052721, 1051872, 1051835, 1056023, 1056027, 1051908, 1056114, 1056118, 1051806, 1051810, 1051812, 1051959, 1051961, 1056068, 1056074, 1051843, 1056085, 1056089, 1056019, 1051826, 1051967, 1051970, 1051831, 1056031, 1051842, 1051851, 1056103, 1051852, 1051977, 1051854, 1051859, 1051986, 1051989, 1056077, 1056080, 1056059, 1056061, 1051881, 1051940, 1051889, 1051894, 1051995, 1051998, 1051935, 1051900, 1056044, 1056045, 1051904, 1056065, 1051910, 1051915, 1051919, 1051926, 1051931, 1051975, 1051945, 1051951, 1051952, 1051978, 1051982, 1056003, 1056006, 1056008, 1056013, 1056015, 1056019, 1056036, 1056040, 1056050, 1056055, 1056095, 1056121, 1051829, 1051846, 1051909, 1051934, 1056124, 1056132, 1056143, 1056147, 1056151, 1056155, 1056159, 1056163, 1056167, 1056171, 1056175, 1056179, 1056183, 1056187, 1056191, 1056195, 1056199, 1056204, 1056206, 1056210, 1056214, 1056218, 1056222, 1056226, 1056244, 1056248, 1056252, 1056256, 1056269, 1056273, 1056277, 1056287, 1056291, 1056295, 1056299, 1058148, 1058152, 1057003, 1057007, 1057011, 1057015, 1057019, 1057023, 1057027, 1057031, 1057035, 1057039, 1056301, 1056305, 1045000, 1045004, 1045008, 1045012, 1065000, 1704500, 1704508, 1704519, 1704502, 1704543, 1704513, 1704517, 1704525, 1704529, 1704533, 1704544, 1704538, 1102113, 1102117, 1102121, 1102125, 1102126, 1102130, 1073303, 1073317, 1073318, 1075000, 1075001, 1075002, 1075003, 1012378, 1012900, 1012901, 1012902, 1012380, 1012381, 1012903, 1012904, 1012905, 1012906, 1012907, 1084000, 1084004, 1084013, 1084017];

var enter = "\r\n";

var need = 2438698, item;

var selected, seld = -1;
var finallist;

function start() {
	status = -1;
	action(1, 0, 0);
}

function action(mode, type, sel) {
	if (mode == 1) {
		status++;
	} else {
		cm.dispose();
		return;
    	}
	if (status == 0) {
		var msg = "#e#rDEEZ 스페셜 캐시박스 A#n#k"+enter;
		msg += "#r#i"+need +"##z"+need +"##k를 가지고 있다면 제가 DEEZ 스페셜 캐시박스 A 에서 1종을 랜덤으로 바꿔줄게요. 운이 좋다면 #r어메이징하게 예쁜#k 스페셜 캐시 의상 아이템도 받을 수가 있죠! 어때요? 지금 바로 쿠폰을 사용하시겠어요?#b"+enter;
		msg += "#L1#아이템 리스트보기 (남)"+enter;
		msg += "#L2#아이템 리스트보기 (여)"+enter+enter;
		msg += "#L3#아이템 사용 (랜덤)";
		cm.sendSimple(msg);
	} else if (status == 1) {
		seld = sel;
		if (sel == 1 || sel == 2) {
			var msg = "DEEZ 스페셜 캐시박스 A에선 다음과 같은 아이템들이 등장합니다!#b"+enter;
			finallist = sel == 1 ? MaleItemList : FemaleItemList;
			for (i = 0; i < finallist.length; i++) {
				msg += "#i"+finallist[i]+"##z"+finallist[i]+"#";
				if (i % 5 == 4)
					msg += enter;
			}
			cm.sendOk(msg);
			cm.dispose();
		} else {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}
			var msg = "어떤 성별의 의상을 보시겠어요?#fs11##b"+enter;
			msg += "#L1#남성"+enter;
			msg += "#L2#여성"+enter;

			cm.sendSimple(msg);
		}
	} else if (status == 2) {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}
			finallist = sel == 1 ? MaleItemList : FemaleItemList;
			cm.sendYesNo("정말 #b#i"+need+"##z"+need+"##k 아이템을 사용하겠어요?");
	} else if (status == 3) {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}

			item = finallist[Packages.server.Randomizer.rand(0, finallist.length)];

			check = Packages.server.MapleItemInformationProvider.getInstance().itemExists(item);

			while (!check) {
				item = finallist[Packages.server.Randomizer.rand(0, finallist.length)];
			}

			if (!cm.canHold(item)) {
				cm.sendOk("장비창에 공간이 부족합니다.");
				cm.dispose();
				return;
			}
			cm.gainItem(item, 1);
			cm.gainItem(need, -1);
			var msg = "어때요? #r#i"+item+"##z"+item+"##k아이템은 잘 받았어요? 정말 어메이징하지 않아요? 다음번에 또 #bDEEZ 스페셜 캐시박스 A#k가 생기면 나를 찾아와줘요!";
			cm.sendOk(msg);
			cm.dispose();
	}
}