importPackage(java.lang);
importPackage(Packages.server);

var MaleItemList = [1000424, 1000300, 1000302, 1000307, 1000311, 1000315, 1000319, 1000558, 1000652, 1000656, 1000323, 1000331, 1000677, 1000682, 1000334, 1000338, 1000649, 1000343, 1000344, 1000350, 1000353, 1000356, 1000358, 1000362, 1000364, 1000592, 1000671, 1000674, 1000426, 1000429, 1000433, 1000436, 1000437, 1000515, 1000573, 1000443, 1000447, 1000452, 1000456, 1000459, 1000553, 1000591, 1000637, 1000469, 1000474, 1000583, 1000658, 1000662, 1000665, 1000567, 1000477, 1000694, 1000698, 1000688, 1000479, 1000713, 1000717, 1000489, 1000494, 1000499, 1000509, 1000512, 1000519, 1000534, 1000577, 1000564, 1000586, 1000588, 1000597, 1000606, 1000614, 1000633, 1000722, 1000701, 1000704, 1000628, 1000630, 1000641, 1000709, 1000724, 1000462, 1000495, 1000521, 1000537, 1000550, 1008001, 1008005, 1008013, 1008017, 1008021, 1008025, 1008029, 1008033, 1008037, 1008041, 1008045, 1008049, 1008053, 1008057, 1008061, 1008065, 1008069, 1008073, 1008077, 1008081, 1008085, 1008089, 1008093, 1008097, 1008101, 1008105, 1008109, 1008113, 1008117, 1008121, 1008125, 1008129, 1008150, 1008154, 1008158, 1008162, 1008166, 1008170, 1008174, 1008145, 1008177, 1008181, 1008185, 1008189, 1008212, 1008216, 1008220, 1008224, 1008228, 1008232, 1008236, 1008240, 1008244, 1008248, 1008252, 1008256, 1008167, 1008171, 1008258, 1008262, 1008266, 1008270, 1008274, 1052716, 1050852, 1050831, 1050838, 1050861, 1050990, 1050995, 1050805, 1058037, 1058041, 1050936, 1050939, 1050941, 1050909, 1050997, 1050836, 1050887, 1050931, 1050842, 1050849, 1050855, 1058045, 1058047, 1050856, 1058025, 1050865, 1058054, 1050868, 1050872, 1050875, 1050879, 1050881, 1050960, 1050965, 1050886, 1058007, 1058013, 1058029, 1058033, 1050897, 1050900, 1050902, 1050911, 1050917, 1050946, 1050950, 1050956, 1050966, 1050971, 1050974, 1050980, 1050984, 1050988, 1058000, 1058006, 1058016, 1058021, 1058061, 1058064, 1058068, 1058072, 1058076, 1050800, 1050840, 1050889, 1050912, 1058078, 1058093, 1058097, 1058101, 1058105, 1058109, 1058113, 1058117, 1058121, 1058125, 1058129, 1058133, 1058137, 1058141, 1058145, 1056195, 1058154, 1058158, 1058162, 1058172, 1058176, 1058180, 1058184, 1058188, 1058192, 1058205, 1058209, 1058213, 1058217, 1058227, 1058231, 1058235, 1058149, 1057000, 1057004, 1057008, 1057012, 1057016, 1057020, 1057024, 1057028, 1057032, 1057036, 1057040, 1058239, 1058243, 1045001, 1045005, 1045009, 1045013, 1065001, 1704504, 1704509, 1704520, 1704503, 1704505, 1704514, 1704518, 1704526, 1704530, 1704534, 1704545, 1102114, 1102118, 1102122, 1102134, 1102127, 1102131, 1073303, 1073317, 1073318, 1075000, 1075001, 1075002, 1075003, 1012378, 1012900, 1012901, 1012902, 1012380, 1012381, 1012903, 1012904, 1012905, 1012906, 1012907, 1084001, 1084010, 1084014, 1084018];

var FemaleItemList = [1001424, 1001300, 1001302, 1001307, 1001311, 1001315, 1001319, 1001558, 1001652, 1001656, 1001323, 1001331, 1001677, 1001682, 1001334, 1001338, 1001649, 1001343, 1001344, 1001350, 1001353, 1001356, 1001358, 1001362, 1001364, 1001592, 1001671, 1001674, 1001426, 1001429, 1001433, 1001436, 1001437, 1001515, 1001573, 1001443, 1001447, 1001452, 1001456, 1001459, 1001553, 1001591, 1001637, 1001469, 1001474, 1001583, 1001658, 1001662, 1001665, 1001567, 1001477, 1001694, 1001698, 1001688, 1001479, 1001713, 1001717, 1001489, 1001494, 1001499, 1001509, 1001512, 1001519, 1001534, 1001577, 1001564, 1001586, 1001588, 1001597, 1001606, 1001614, 1001633, 1001722, 1001701, 1001704, 1001628, 1001630, 1001641, 1001709, 1001724, 1001462, 1001495, 1001521, 1001537, 1001550, 1008001, 1008005, 1008013, 1008017, 1008021, 1008025, 1008029, 1008033, 1008037, 1008041, 1008045, 1008049, 1008053, 1008057, 1008061, 1008065, 1008069, 1008073, 1008077, 1008081, 1008085, 1008089, 1008093, 1008097, 1008101, 1008105, 1008109, 1008113, 1008117, 1008121, 1008125, 1008129, 1008150, 1008154, 1008158, 1008162, 1008166, 1008170, 1008174, 1008145, 1008177, 1008181, 1008185, 1008189, 1008212, 1008216, 1008220, 1008224, 1008228, 1008232, 1008236, 1008240, 1008244, 1008248, 1008252, 1008256, 1008167, 1008171, 1008258, 1008262, 1008266, 1008270, 1008274, 1052714, 1051856, 1051832, 1051833, 1051936, 1051844, 1051871, 1052723, 1056024, 1056028, 1051804, 1056115, 1056119, 1051807, 1051813, 1051957, 1051960, 1056072, 1056075, 1051818, 1051875, 1056086, 1056090, 1056110, 1051827, 1051966, 1051969, 1051878, 1051839, 1051874, 1051864, 1056104, 1056100, 1051853, 1051858, 1051987, 1051991, 1056078, 1056081, 1056084, 1056056, 1056058, 1051880, 1051884, 1056092, 1051891, 1051892, 1051996, 1051895, 1051902, 1056043, 1051905, 1056066, 1051906, 1051911, 1051916, 1051922, 1051930, 1051974, 1051933, 1051939, 1051953, 1051955, 1051979, 1051984, 1056000, 1056004, 1056011, 1056016, 1056020, 1056035, 1056037, 1056051, 1056052, 1056093, 1056096, 1056122, 1051836, 1051862, 1051914, 1051948, 1056125, 1056137, 1056144, 1056148, 1056152, 1056156, 1056160, 1056164, 1056168, 1056172, 1056176, 1056180, 1056184, 1056188, 1056192, 1056196, 1056200, 1056205, 1056207, 1056211, 1056215, 1056219, 1056223, 1056227, 1056237, 1056241, 1056245, 1056249, 1056253, 1056257, 1056270, 1056274, 1056278, 1056288, 1056292, 1056296, 1056300, 1058149, 1057000, 1057004, 1057008, 1057012, 1057016, 1057020, 1057024, 1057028, 1057032, 1057036, 1057040, 1056302, 1056306, 1045001, 1045005, 1045009, 1045013, 1065001, 1704504, 1704509, 1704520, 1704503, 1704505, 1704514, 1704518, 1704526, 1704530, 1704534, 1704545, 1102114, 1102118, 1102122, 1102134, 1102127, 1102131, 1073303, 1073317, 1073318, 1075000, 1075001, 1075002, 1075003, 1012378, 1012900, 1012901, 1012902, 1012380, 1012381, 1012903, 1012904, 1012905, 1012906, 1012907, 1084001, 1084010, 1084014, 1084018];

var enter = "\r\n";

var need = 2438699, item;

var selected, seld = -1;
var finallist;

function start() {
	status = -1;
	action(1, 0, 0);
}

function action(mode, type, sel) {
	if (mode == 1) {
		status++;
	} else {
		cm.dispose();
		return;
    	}
	if (status == 0) {
		var msg = "#e#rDEEZ 스페셜 캐시박스 B#n#k"+enter;
		msg += "#r#i"+need +"##z"+need +"##k를 가지고 있다면 제가 DEEZ 스페셜 캐시박스 B 에서 1종을 랜덤으로 바꿔줄게요. 운이 좋다면 #r어메이징하게 예쁜#k 스페셜 캐시 의상 아이템도 받을 수가 있죠! 어때요? 지금 바로 쿠폰을 사용하시겠어요?#b"+enter;
		msg += "#L1#아이템 리스트보기 (남)"+enter;
		msg += "#L2#아이템 리스트보기 (여)"+enter+enter;
		msg += "#L3#아이템 사용 (랜덤)";
		cm.sendSimple(msg);
	} else if (status == 1) {
		seld = sel;
		if (sel == 1 || sel == 2) {
			var msg = "DEEZ 스페셜 캐시박스 B에선 다음과 같은 아이템들이 등장합니다!#b"+enter;
			finallist = sel == 1 ? MaleItemList : FemaleItemList;
			for (i = 0; i < finallist.length; i++) {
				msg += "#i"+finallist[i]+"##z"+finallist[i]+"#";
				if (i % 5 == 4)
					msg += enter;
			}
			cm.sendOk(msg);
			cm.dispose();
		} else {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}
			var msg = "어떤 성별의 의상을 보시겠어요?#fs11##b"+enter;
			msg += "#L1#남성"+enter;
			msg += "#L2#여성"+enter;

			cm.sendSimple(msg);
		}
	} else if (status == 2) {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}
			finallist = sel == 1 ? MaleItemList : FemaleItemList;
			cm.sendYesNo("정말 #b#i"+need+"##z"+need+"##k 아이템을 사용하겠어요?");
	} else if (status == 3) {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}

			item = finallist[Packages.server.Randomizer.rand(0, finallist.length)];

			check = Packages.server.MapleItemInformationProvider.getInstance().itemExists(item);

			while (!check) {
				item = finallist[Packages.server.Randomizer.rand(0, finallist.length)];
			}

			if (!cm.canHold(item)) {
				cm.sendOk("장비창에 공간이 부족합니다.");
				cm.dispose();
				return;
			}
			cm.gainItem(item, 1);
			cm.gainItem(need, -1);
			var msg = "어때요? #r#i"+item+"##z"+item+"##k아이템은 잘 받았어요? 정말 어메이징하지 않아요? 다음번에 또 #bDEEZ 스페셜 캐시박스 B#k가 생기면 나를 찾아와줘요!";
			cm.sendOk(msg);
			cm.dispose();
	}
}