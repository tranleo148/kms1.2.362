var status;
var select;

검정 = "#fc0xFF191919#"
var 라이딩 = new Array(2430932, 2430933, 2430934, 2430935, 2430936, 2430937, 2430938, 2430939, 2430948, 2430968, 2431073, 2431135, 2431137, 2431267, 2431353, 2431362, 2431362, 2431415, 2431473, 2431474, 2431745, 2431797, 2431799, 2431915, 2431949, 2432030, 2432031, 2432078, 2432085, 2432149, 2432151, 2432216, 2432218, 2432291, 2432293, 2432295, 2432309, 2432347, 2432348, 2432349, 2432351, 2432359, 2432361, 2432431, 2432433, 2432449, 2432498, 2432500, 2432552, 2432580, 2432582, 2432645, 2432653, 2432733, 2432735, 2432751, 2432806, 2433051, 2433053, 2433272, 2433274, 2433276, 2433345, 2433347, 2433349, 2433499, 2433501, 2433718, 2433735, 2433736, 2433809, 2433946, 2433948, 2433992, 2434077, 2434079, 2434275, 2434277, 2434377, 2434379, 2434477, 2434515, 2434517, 2434649, 2434735, 2434737, 2435089, 2435091, 2435112, 2435113, 2435203, 2435205, 2435296, 2435298, 2435441, 2435476, 2435517, 2435720, 2435722, 2435842, 2435843, 2435844, 2435845, 2435965, 2435967, 2435986, 2436030, 2436031, 2436079, 2436080, 2436081, 2436183, 2436185, 2436292, 2436294, 2436405, 2436407, 2436523, 2436524, 2436525, 2436526, 2436597, 2436599, 2436714, 2436715, 2436716, 2436728, 2436730, 2436778, 2436780, 2436837, 2436839, 2436957, 2437026, 2437040, 2437042, 2437123, 2437125, 2437240, 2437259, 2437261, 2437497, 2437623, 2437625, 2437719, 2437721, 2437737, 2437738, 2437794, 2437809, 2437923, 2438136, 2438137, 2438138, 2438139, 2438340, 2438373, 2438380, 2438382, 2438408, 2438409, 2438486, 2438488, 2438493, 2438494, 2438638, 2438640, 2438657, 2438715, 2438743, 2438745, 2438882, 2438886, 2439034, 2439036, 2439127, 2439144, 2439266, 2439329, 2439331, 2439443, 2439484, 2439486, 2439666, 2439667, 2439675, 2439677, 2439694, 2439808, 2439909, 2439911, 2439913, 2439915, 2439933, 2630240, 2630261, 2630279, 2630386, 2630387, 2630448, 2630451, 2630476, 2630488, 2630563, 2630570, 2630573, 2630575, 2630763, 2630764, 2630765, 2630913, 2630917, 2630918, 2630919, 2630971, 2631136, 2631140, 2631191, 2631413, 2631448, 2631460, 2631518, 2631520, 2631561, 2631563, 2631710, 2631800, 2631890, 2631914, 2632120, 2632275, 2632283, 2632352, 2632353, 2632361, 2632445, 2632713, 2632820, 2632821, 2632885, 2632887, 2632913, 2633061, 2633065, 2633075);
var 코인 = 4310249
var 필요개수 = 50;
var item = 0;

function start() {
    status = -1;
    action(1, 1, 0);
}

function action(mode, type, selection) {
    if (mode == -1) {
        cm.dispose();
    } else {
        if (mode == 0) {
            cm.dispose();
            return;
        }
        if (mode == 1)
            status++;
        else
            status--;
        if (status == 0) {
            var leaf = cm.itemQuantity(4310012);
            var text = ""
            text = "#fs11#" + 검정 + "저는 #fc0xFF000087#[블랙]#k " + 검정 + "컨텐츠 부서에서 #b라이딩 뽑기#k" + 검정 + "를 담당하고 있는 포밍이라고 합니다."
            text += "\r\n라이딩 뽑기 한번 당 #r#z4310012# 65개#k" + 검정 + "로 가 가능합니다.\r\n\r\n";
            text += "현재 보유중인 #d#z4310012##k 갯수 : #e#r"+leaf+"#k개#n\r\n"
            text += "#fc0xFFD5D5D5#───────────────────────────#k\r\n";
            text += "#L0##fc0xFF3B36CF#라이딩을 뽑고 싶습니다.\r\n"
            cm.sendSimple(text)
        } else if (status == 1) {
            if (selection == 12) {
                var amed = "#fs11##fc0xFB1B66FF#라이딩 리스트#k\r\n\r\n";
                for (var i = 0; i < 라이딩.length; i++) {
                    amed += "#i" + 라이딩[i] + "# #fc0xFF6B66FF##z" + 라이딩[i] + "#\r\n";
                }
                cm.sendOk(amed);
                cm.dispose();
            } else {
                item = selection;
                if (!cm.haveItem(4310012, 65)) {
		            cm.sendOk("#fs11##i4310012# #b#z4310012##k 아이템이 부족하거나 없는거 같네요.");
                    cm.dispose();
                } else {
                    cm.sendYesNo("#fs11#정말로 #b라이딩#k을 뽑으시겠습니까?\r\n뽑기 진행 시 #r#z4310012# 65개#k가 소모됩니다.");
                }
            }
        } else if (status == 2) {
            switch (item) {
                case 0:
                    라이딩 = 라이딩[Math.floor(Math.random() * 라이딩.length)];
                    if (cm.canHold(라이딩)) {
                        cm.gainItem(라이딩, 1);
                        cm.gainItem(4310012, -65);
                        말 = "#fs11#축하드려요 #b#h ##k님! 원하시던 라이딩은 나오셨나요? 마음에 들지 않는다면 한번 더 뽑아보시는건 어떨까요?\r\n\r\n"
                        말 += "#fUI/UIWindow2.img/QuestIcon/4/0#\r\n"
                        말 += "#i" + 라이딩 + "# #b#z" + 라이딩 + "##k\r\n\r\n"
                        말 += "#L0##fc0xFF3B36CF#한번 더 뽑고 싶습니다.\r\n#L1#대화창 닫기"
                        cm.sendOk(말);
                    } else {
                        cm.sendOk("#fs11#라이딩을 받기 위한 공간이 부족한거 같네요.");
                        cm.dispose();
                    }
                    break;
            } 
        } else if (status ==3) {
            if (selection == 0) {
                cm.dispose();
                cm.openNpc(1540109);
            } else {
                cm.dispose();
            }
        }
    }
}