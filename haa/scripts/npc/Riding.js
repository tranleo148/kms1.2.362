importPackage(Packages.server);

var enter = "\r\n";
var seld = -1;

var 랜덤필요 = 4021031, 랜덤개수 = 60;
var 선택필요 = 4021031, 선택개수 = 300;

var riding = [2432149,2432151,2432170,2432218,2432295,2432309,2432328,2432347,2432348,2432349,2432350,2432351,2432359,2432361,2432418,2432431,2432433,2432449,2432527,2432528,2432552,2432580,2432582,2432635,2432645,2432653,2432724,2432733,2432735,2432751,2432806,2432994,2432995,2432996,2432997,2432998,2432999,2433000,2433001,2433002,2433003,2431949,2433051,2433053,2433499,2433501,2433458,2433459,2433460,2430633,2431424,2433658,2433718,2433735,2433736,2433809,2433811,2433932,2433946,2433948,2433992,2434013,2431473,2434077,2434275,2434277,2434377,2434379,2434515,2434517,2434525,2434526,2434527,2434580,2431415,2434649,2434674,2434728,2434735,2434737,2434761,2434762,2434967,2435089,2435091,2435112,2435113,2435114,2435203,2435205,2435296,2435298,2435440,2435441,2435442,2435476,2435517,2435720,2435722,2435842,2435843,2435844,2435845,2435965,2435967,2435986,2436030,2436031,2436079,2436080,2436081,2436126,2436183,2436185,2436292,2436294,2436405,2436407,2436523,2436524,2436525,2436597,2436599,2436610,2436648,2436714,2436715,2436716,2436728,2436730,2436778,2436780,2436837,2436839,2436957,2437026,2437040,2437042,2437123,2437125,2437240,2437259,2437261,2437497,2437623,2437625,2437719,2437721,2437737,2437738,2437794,2437809,2437852,2437923,2438136,2438137,2438138,2438139,2438340,2438380,2438382,2438373,2430935,2430906,2430908,2431541,2431528,2431529,2431474,2431073,2430190,2430634,2431494,2431495,2430053,2431498,2430057,2431500,2431501,2431503,2431504,2431505,2430149,2431745,2431757,2431760,2431764,2431765,2431797,2431799,2431898,2430521,2431915,2432003,2432007,2432015,2432029,2432030,2432031,2432078,2432085,2430091,2430506,2430610,2430937,2430938,2430939,2430794,2430907,2430932,2430933,2430934,2430936,2431137,2431135,2431136,2431267,2434079,2433454,2433349,2433347,2630261,2439909,2439913,2630240,2630116,2439933,2433345,2433276,2433274,2433272,2432500,2432498,2432293,2432291,2432216,2438408,2438409,2438486,2438488,2438493,2438494,2438638,2438640,2438657,2438715,2438743,2438745,2438882,2438886,2439034,2439036,2439127,2439144,2439266,2439278,2439295,2439329,2439331,2439406,2439443,2439484,2439486,2439666,2439667,2439675,2439677,];
function start() {
	status = -1;
	action(1, 0, 0);
}
function action(mode, type, sel) {
	if (mode == 1) {
		status++;
	} else {
		cm.dispose();
		return;
    	}
	if (status == 0) {
		var msg = "#fs11#"+enter;
		msg += "#fc0xFF000000#각종 라이딩들이 준비되어 있는 것 같다.#b"+enter;
		msg += "랜덤 - #i"+랜덤필요+"##z"+랜덤필요+"# "+랜덤개수+"개"+enter;
		//msg += "선택 - #i"+선택필요+"##z"+선택필요+"# "+선택개수+"개#b"+enter;
		msg += "#L1##fs11##d아이템 목록을 확인해본다."+enter;
		msg += "#L2#랜덤으로 뽑아볼래.";
		//msg += "#L3#선택으로 뽑아볼래.";
		
		cm.sendSimple(msg);
	} else if (status == 1) {
		switch (sel) {
			case 1:
				var msg = "#fs11##b"+enter+enter;
				for (i = 0; i < riding.length; i++) msg += "#i"+riding[i]+"##z"+riding[i]+"#"+enter;
				cm.sendOk(msg);
				cm.dispose();
			break;
			case 2:
				if (!cm.haveItem(랜덤필요, 랜덤개수)) {
					cm.sendOk("뽑기에 필요한 재료가 없다.");
					cm.dispose();
					return;
				}
				a = Randomizer.rand(0, (riding.length - 1));
				cm.gainItem(랜덤필요, -랜덤개수);
				cm.gainItem(riding[a], 1);
				cm.sendOk("#fs11#다음과 같은 아이템이 나왔다. #fs11##b"+enter+"#i"+riding[a]+"##z"+riding[a]+"#");
				cm.dispose();
			break;
			case 3:
				var msg = "원하는 라이딩을 선택해보자. #fs11##b"+enter;
				for (i = 0; i < riding.length; i++) msg += "#L"+i+"##i"+riding[i]+"##z"+riding[i]+"#"+enter;
				cm.sendSimple(msg);
			break;
		}
	} else if (status == 2) {
			if (!cm.haveItem(선택필요, 선택개수)) {
				cm.sendOk("뽑기에 필요한 재료가 없다.");
				cm.dispose();
				return;
			}
			a = sel;
			cm.gainItem(선택필요, -선택개수);
			cm.gainItem(riding[a], 1);
			cm.sendOk("다음과 같은 아이템이 나왔다. #fs11##b"+enter+"#i"+riding[a]+"##z"+riding[a]+"#");
			cm.dispose();
	}
}